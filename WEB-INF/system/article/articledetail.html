<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <#if Session.user?exists>
        <title> ${Session.user.username}--Article</title>
        <#else>
            <title>Article</title>
    </#if>
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="/images/favicon.ico"/>
    <link href="/css/font-awesome.css" rel="stylesheet">
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/templatemo-style.css" rel="stylesheet">
    <script src="/js/jquery-1.11.2.min.js"></script>
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?dcfc18ee0dcef9d4c749fffb4deec003";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

</head>
<body>
<!-- Left column -->
<div class="templatemo-flex-row">
    <div class="templatemo-sidebar">
        <header class="templatemo-site-header">
           <i class="fa fa-diamond fa-2x" aria-hidden="true"></i>
            <#if Session.user?exists>
                <a href="/user/index.do"><h1 class="media-heading text-uppercase">${Session.user.username}个人博客</h1></a>
                <#else>
                    <a href="/welcome/index.do"><h1 class="media-heading text-uppercase">张春萌个人博客</h1></a>
            </#if>
        </header>
        <div class="profile-photo-container">
            <img src="/images/personal.jpg" alt="Profile Photo" class="img-responsive">
            <div class="profile-photo-overlay"></div>
        </div>
        <!-- Search box -->
          <form class="templatemo-search-form" role="search" action="/welcome/search.do" method="post">
            <div class="input-group">
                <button type="submit" class="fa fa-search"></button>
                <input type="text" class="form-control" placeholder="Search" name="title" id="title">
            </div>
        </form>
        <div class="mobile-menu-icon">
            <i class="fa fa-bars"></i>
        </div>
        <#if Session.user?exists>
            <nav class="templatemo-left-nav">
                <ul>
                    <li><a id="article" class="active"><i class="fa fa-file-code-o" aria-hidden="true"></i>我的文章</a>
                        <ul id="typical" class="menu-second">
                            <li><a href="/article/article.do?type=1">JAVA</a></li>
                            <li><a href="/article/article.do?type=2">PYTHON</a></li>
                            <li><a href="/article/article.do?type=3">SQL</a></li>
                            <li><a href="/article/article.do?type=4">AJAX</a></li>
                            <li><a href="/article/article.do?type=5">HTML</a></li>
                            <li><a href="/article/article.do?type=0">随笔</a></li>
                        </ul></li>
                    <li><a href="/welcome/discuss.do"><i class="
				fa fa-list-alt fa-fw"></i>讨论</a></li>
                    <li><a href="/message/myMessage.do"><i class="fa fa-th-list fa-fw"></i>我的留言</a></li>
                    <li><a href="/login/logout.do"><i class="fa fa-sign-out fa-fw"></i>退出登录</a></li>
                </ul>
            </nav>
            <#else>
            <nav class="templatemo-left-nav">
                <ul>
                    <li><a id="article" class="active"><i class="fa fa-file-code-o" aria-hidden="true"></i>文章</a>
                        <ul id="typical" class="menu-second">
                            <li><a href="/welcome/article.do?type=1">JAVA</a></li>
                            <li><a href="/welcome/article.do?type=2">PYTHON</a></li>
                            <li><a href="/welcome/article.do?type=3">SQL</a></li>
                            <li><a href="/welcome/article.do?type=4">AJAX</a></li>
                            <li><a href="/welcome/article.do?type=5">HTML</a></li>
                            <li><a href="/welcome/article.do?type=0">随笔</a></li>
                        </ul></li>
                    <li><a  href="/welcome/discuss.do"><i class="
				fa fa-list-alt fa-fw"></i>讨论</a>
                    </li>
                    <li><a href="/welcome/message.do"><i class="fa fa-th-list fa-fw"></i>留言</a></li>
                    <li><a href="/welcome/aboutme.do"><i class="fa fa-black-tie fa-fw"></i>关于我</a></li>
                    <li><a href="/welcome/login.do" target="_blank"><i class="fa fa-sign-in fa-fw"></i>注册/登录</a></li>
                </ul>
            </nav>
        </#if>
    </div>

    <!-- Main content -->
    <div class="templatemo-content col-1 light-gray-bg">
        <#if article?exists>
            <div class="templatemo-top-nav-container">
                <div class="row">
                    <nav class="templatemo-top-nav col-lg-12 col-md-12">
                        <ul class="text-uppercase">
                            <#if (article.articletype=="1")>
                                <li><a href="" class="active">Java</a></li>
                            </#if>
                            <#if (article.articletype=="2")>
                                <li><a href="" class="active">Python</a></li>
                            </#if>
                            <#if (article.articletype=="3")>
                                <li><a href="" class="active">Sql</a></li>
                            </#if>
                            <#if (article.articletype=="4")>
                                <li><a href="" class="active">Ajax</a></li>
                            </#if>
                            <#if (article.articletype=="5")>
                                <li><a href="" class="active">Html</a></li>
                            </#if>
                            <#if (article.articletype=="0")>
                                <li><a href="" class="active">随笔</a></li>
                            </#if>
                            <#if Session.user?exists>
                                <#if Session.user.userid==article.user.userid>
                                <li> <a href="/article/updateArticle.do?articleid=${article.articleid}" id="update"><h3 class="btn btn-info" ><i class="fa fa-pencil fa-fw"></i>修改</h3></a></li>
                                <li> <a href="/article/delete.do?articleid=${article.articleid}" id="delete"><h3 class="btn btn-danger" > <i class="fa fa-trash-o fa-lg"></i>删除</h3></a></li>
                                </#if>
                            </#if>

                        </ul>
                    </nav>
                </div>
            </div>
            <div class="templatemo-flex-row flex-content-row">
                <div class="col-1">
                    <div class="templatemo-content-widget white-bg">
                        <article>
                            <header style="border-left: 8px solid #13895F;padding: 30px;"><h1 class="media-heading text-uppercase">${article.title}</h1>作者：${article.user.nickname}</header>
                           <hr><br>
                            <div><i class="fa fa-quote-left fa-3x fa-pull-left fa-border" aria-hidden="true"></i>
                                <p>${article.content}</p>
                            </div>
                        </article>
                    </div>
                </div>
            </div>
            <div class="pinfortext">
            <span>
					<a  id="like" onclick="like(${article.articleid})" title="喜欢">
						<span><i class="fa fa-heart-o fa-4x" id="support"></i></span>
						<em id="num">${article.likeCount}</em>
					</a>

            </span>
            </div>
        <div class="templatemo-flex-row flex-content-row">
            <div class="col-1">
                <div class="panel panel-default margin-10">
                    <div class="panel-heading"><h2 class="text-uppercase">给作者留言</h2></div>
                    <div class="panel-body">
                        <form action="/message/addMessage.do" class="templatemo-login-form" method="post">
                            <div class="row form-group">
                                <div class="col-lg-6 has-success form-group">
                                    <label class="control-label" for="name">名字</label>
                                    <input type="hidden" name="touserid" class="form-control" id="touserid" value="${article.author}">
                                    <input type="hidden" name="fromuserid" class="form-control" id="fromuserid">
                                    <input type="text" name="name" class="form-control" id="name">
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col-lg-12 form-group">
                                    <textarea class="form-control" id="content" rows="3"></textarea>
                                </div>
                            </div>
                            <div class="row form-group">
                                <button type="submit" style="margin-left: 20px;" class="templatemo-blue-button">提交</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        </#if>
        <footer class="text-right">
            <footer class="text-right">
                <p>Copyright &copy;ZCM</p>
            </footer>
        </footer>
    </div>
</div>
<!-- JS -->
<script type="text/javascript" src="/js/jquery-1.11.2.min.js"></script>      <!-- jQuery -->
<script type="text/javascript" src="/js/jquery-migrate-1.2.1.min.js"></script> <!--  jQuery Migrate Plugin -->
<script type="text/javascript" src="/js/templatemo-script.js"></script>      <!-- Templatemo Script -->
<script type="text/javascript">
    $('#delete').click(function() {
        event.returnValue = confirm("删除是不可恢复的，你确认要删除吗？");
    });
    $('#update').click(function() {
        event.returnValue = confirm("确认修改吗？");
    });
</script>
<script language="javascript" type="text/javascript">
    $("#typical").hide();
    $("#article").click(function(){
        $("#typical").toggle();

    });
    function like(id) {
        $.ajax({
            type:"POST",
            url:"/article/addlike.do",
            data:{articleid:id},
            dataType:"json",
            success:function(data){
                $("#num").html(data.article.likeCount);
                $("#support").removeClass();
                $("#support").addClass("fa");
                $("#support").addClass("fa-heart");
                $("#support").addClass("fa-4x");
                $("#support").css("color","red");
             //   alert(data.article.likeCount);

            }
        });
    }


</script>


</body>
</html>